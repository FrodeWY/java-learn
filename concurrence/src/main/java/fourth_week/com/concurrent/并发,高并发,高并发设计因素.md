## 什么是并发

当有多个线程在操作时,如果系统只有一个CPU,则它根本不可能真正同时进行一个以上的线程，它只能把CPU运行时间划分成若干个时间段,再将时间 段分配给各个线程执行，在一个时间段的线程代码运行时，其它线程处于挂起状。.这种方式我们称之为并发(Concurrent)。

## 什么是高并发

**高并发（High Concurrency）**。并发是操作系统领域的一个概念，指的是一段时间内多任务流交替执行的现象，后来这个概念被泛化，高并发用来指大流量、高请求的业务情景，比如春运抢票，电商双十一，秒杀大促等场景。



## 实现高并发高可用系统需要考虑哪些因素

### 高并发的度量指标

- 响应时间

  接口处理时间很短,能够快速返回结果,平均延迟往往没有什么实际意义,导致偏差较大,往往使用中位数或者百分之多少的分位数表示(TP90,TP99)

- 吞吐量

  单位时间内处理的请求数量。

- QPS

  每秒响应请求数。

- 并发用户数

  同时承载正常使用系统功能的用户数量。

### 如何提高并发能力

- **垂直扩展**

  - **增强单机硬件性能**（优先）

    > 增加CPU核数如32核，升级更好的网卡如万兆，升级更好的硬盘如SSD，扩充硬盘容量如2T，扩充系统内存如128G。

  - **提升单机架构性能**

    > 使用Cache来减少IO次数，使用异步来增加单服务吞吐量，使用无锁数据结构来减少响应时间。

  但是**单机性能总是有极限**的。所以分布式架构设计高并发终极解决方案还是**水平扩展**。

- **水平扩展**

  - 只要增加服务器数量，就能线性扩充系统性能。水平扩展对系统架构设计是有要求的，难点在于：**如何在架构各层进行可水平扩展的设计**。